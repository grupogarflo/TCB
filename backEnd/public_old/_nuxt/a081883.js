(window.webpackJsonp=window.webpackJsonp||[]).push([[11,23],{624:function(t,e,o){"use strict";o.r(e);var n=o(274),l={props:{titleText:"",title:{type:String,default:"0"},discount:{type:String,default:null}}},r=o(42),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return"1"==t.title?e("h1",{staticClass:"title-section"},[t._v(t._s(t.titleText))]):"2"==t.title?e("h2",{staticClass:"title-section"},[t._v(t._s(t.titleText))]):e("h1",{staticClass:"title-section"},[t._v("\n   "+t._s(t.titleText)+"\n   "),null!==t.discount?e(n.a,{staticClass:"text-center ml-5 py-1 discount-detail d-flex-inline",attrs:{color:"#EB008B"}},[t._v("\n      -"+t._s(t._f("discount")(t.discount))+"\n   ")]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},819:function(t,e,o){"use strict";o.r(e);var n=o(659),l=o(601),r=o(612),c=o(611),d=o(614),h=o(128),m=(o(34),o(61),o(35),o(227),o(896)),f=o(897),v=o(623),$=o(630),y={components:{SectionTitle:o(624).default},mixins:[v.validationMixin],validations:{name:{required:$.required},email:{required:$.required,email:$.email},phone:{required:$.required},selectedCountry:{required:$.required}},data:function(){return{name:"",email:"",phone:"",hotel:"",promoCode:"",alertPromo:!1,textAlertPromo:"",loading:!1,loadingPromo:!1,total:null,radioGroup:"card",countries:m.a.getAllCountries(),states:[],cities:[],selectedCountry:"",selectedState:"",city:""}},computed:{selectedCountryErrors:function(){var t=[];return this.$v.selectedCountry.$dirty?(!this.$v.selectedCountry.required&&t.push(2===this.$store.state.booking.idioma?"Country is required.":"Se requiere el pa√≠s."),t):t},nameErrors:function(){var t=[];return this.$v.name.$dirty?(!this.$v.name.required&&t.push(this.$t("forms.info.nameValidation")),t):t},emailErrors:function(){var t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push(this.$t("forms.info.emailValidation")),!this.$v.email.required&&t.push(this.$t("forms.info.emailValidation2")),t):t},phoneErrors:function(){var t=[];return this.$v.phone.$dirty?(!this.$v.phone.required&&t.push(this.$t("forms.info.phoneValidation")),t):t},hotelErrors:function(){var t=[];return this.$v.hotel.$dirty?(!this.$v.hotel.required&&t.push(this.$t("forms.info.hotelValidation")),t):t},language:function(){return this.$store.getters["booking/languageName"]},tourDetail:function(){return this.$store.getters["booking/tours"]},currency:function(){return this.$store.getters["booking/currency"]},totals:function(){return"ing"===this.language?this.$store.getters["booking/bookingTotal"].usd:this.$store.getters["booking/bookingTotal"].mxn},mobile:function(){return this.isMobile()},languageId:function(){return this.$store.getters["booking/language"]},stateData:function(){return this.$store.getters["booking/getAllStore"]},languageCode:function(){return this.$store.getters["booking/language"]},countrySend:function(){var t=this.selectedCountry,e=this.countries.map((function(element){return element.isoCode})).indexOf(t);return!1!==e?this.countries[e]:{}}},methods:{triggerPayment:function(){if(this.$v.$touch(),this.$v.$invalid)return!1;this.$store.commit("booking/addClient",{name:this.name,email:this.email,phone:this.phone,hotel:this.hotel,country:this.countrySend,state:this.selectedState,city:this.city}),this.sendPreBook()},sendPreBook:function(){var t=this;this.loading=!0,this.$axios.post("/preBookEmail",{name:this.name,email:this.email,phone:this.phone,language:this.language,amount:this.totals.usd,currency:this.currency,toursInfo:this.tourDetail,hotel:this.hotel,country:this.countrySend,state:this.selectedState,city:this.city}).then((function(e){t.createPayment()})).catch((function(e){console.log(e),t.loading=!1,t.textErrorBook="some error: ".concat(e.response.status," . ").concat(e.response.data.message)}))},createPayment:function(){var t=this;this.total=this.stateData.tours.total_mxn,"ing"===this.language&&(this.total=this.stateData.tours.total_usd);var e=this.stateData.tours.promocode;void 0!==e&&0!==Object.entries(e).length&&(this.total=e.data_mxn,"ing"===this.language&&(this.total=e.data_usd)),this.$axios.post("/addPayment",{code_book:this.stateData.unicoId,site_book:"yalku.tours",status:"pending",name:this.stateData.client.name,email:this.stateData.client.email,phone:this.stateData.client.phone,language:this.language,amount:this.total,currency:this.stateData.moneda,hotel:this.stateData.client.hotel,toursInfo:this.stateData.tours,merch:this.radioGroup,country:this.countrySend,state:this.selectedState,city:this.city}).then((function(e){t.loading=!1,t.$nuxt.$emit("goPaymentEvent",{client:e.data.data.clientId,total:t.total})}))},validatePromcode:function(){var t=this;this.alertPromo=!1,this.textAlertPromo="",this.loadingPromo=!0;var e=!0;""===this.promoCode&&(this.alertPromo=!0,this.textAlertPromo=this.$t("forms.info.validPromoCode"),e=!1,this.loadingPromo=!1),e&&this.$axios.post("getPromoCode",{id:this.tourDetail.tour_id,date:this.tourDetail.date,promocode:this.promoCode,adult:this.tourDetail.adultos,child:this.tourDetail.ninos,idioma:this.languageId,moneda:this.currency,is_private:this.tourDetail.isPrivate,private_rate:this.tourDetail.isPrivate?this.tourDetail.pax:null}).then((function(e){t.loadingPromo=!1,t.$store.dispatch("booking/setPromocode",e.data)})).catch((function(e){console.log(e.response.data.data),t.alertPromo=!0,t.textAlertPromo=e.response.data.data,t.loadingPromo=!1}))},getState:function(t){this.states=f.a.getStatesOfCountry(t)}}},x=o(42),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;return e("div",[e(c.a,[e(r.a,{staticClass:"text-center",attrs:{cols:"12"}},[e("SectionTitle",{attrs:{titleText:t.$t("forms.info.title")}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.nameField"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto","error-messages":t.nameErrors},on:{input:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.emailField"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto","error-messages":t.emailErrors},on:{input:function(e){return t.$v.email.$touch()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(d.a,{staticClass:"form-field rounded-lg",attrs:{solo:"","single-line":"",filled:"",flat:"","hide-details":"auto","error-messages":t.selectedCountryErrors,"item-text":"name","item-value":"isoCode",items:t.countries,label:t.$t("forms.info.country"),required:""},on:{input:function(e){return t.$v.selectedCountry.$touch()},change:t.getState},model:{value:t.selectedCountry,callback:function(e){t.selectedCountry=e},expression:"selectedCountry"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(d.a,{staticClass:"rounded-lg",attrs:{items:t.states,label:t.$t("forms.info.state"),solo:"","single-line":"",filled:"",flat:"","hide-details":"auto","item-text":"name","item-value":"isoCode","return-object":""},model:{value:t.selectedState,callback:function(e){t.selectedState=e},expression:"selectedState"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.city"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.phoneField"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto","error-messages":t.phoneErrors},on:{input:function(e){return t.$v.phone.$touch()}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.hotelField"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto"},model:{value:t.hotel,callback:function(e){t.hotel=e},expression:"hotel"}}),t._v(" "),e("span",[t._v(t._s(t.$t("forms.info.alertHotel")))])],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"7",md:"8"}},[e(h.a,{staticClass:"form-field rounded-lg",attrs:{placeholder:t.$t("forms.info.promoCodeField"),dense:"",solo:"","single-line":"",filled:"",flat:"","hide-details":"auto"},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),t._v(" "),e(n.a,{attrs:{color:"orange",dismissible:"",elevation:"2",type:"info"},model:{value:t.alertPromo,callback:function(e){t.alertPromo=e},expression:"alertPromo"}},[t._v(t._s(t.textAlertPromo))])],1),t._v(" "),e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"5",md:"4"}},[e(l.a,{staticClass:"bookBtn rounded-lg py-5",attrs:{elevation:"0",loading:t.loadingPromo,block:""},on:{click:t.validatePromcode}},[t._v(" "+t._s(t.$t("forms.info.btnPromo")))])],1)],1),t._v(" "),e(c.a,[e(r.a,{class:[t.mobile?"":"px-8"],attrs:{cols:"12"}},[e(l.a,{staticClass:"bookBtn rounded-lg py-5",attrs:{block:"",elevation:"0",loading:t.loading},on:{click:t.triggerPayment}},[t._v("\n            "+t._s(t.$t("forms.info.btnSubmit"))+"\n         ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);